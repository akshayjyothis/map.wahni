    // center of the map
    var center = [11.253164, 75.784441];

    // Create the map
    var map = L.map('map').setView(center, 10);
    
    
    // Set up the OSM layer
    L.tileLayer(
      'https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=i0nW8E301m1EwekssWed', {
        attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',
        maxZoom: 18
      }).addTo(map);
    

L.control.scale().addTo(map);

// Create a Tile Layer and add it to the map
//var tiles = new L.tileLayer('http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.png').addTo(map);
L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  var searchControl = new L.esri.Controls.Geosearch().addTo(map);

  var results = new L.LayerGroup().addTo(map);

  searchControl.on('results', function(data){
    results.clearLayers();
    for (var i = data.results.length - 1; i >= 0; i--) {
      results.addLayer(L.marker(data.results[i].latlng));
    }
  });

setTimeout(function(){$('.pointer').fadeOut('slow');},3400);

var geojsonFeature = {
  "type": "FeatureCollection",
  "etag": "201a9df7727a4483c0b835bb876fcfaa",
  "name": "wahi_service_area_nWV8avFE",
  "features": [
  { "type": "Feature", "id": "4ddbEZuV9TfzJM3K", "properties": { "Age": 44, "Lat": 11.137778, "City": "Tirur", "Long": 75.840004, "Name": "Murali Krishnan", "Place": "Vallikkunnu north", "color": "6236FF", "Number": 2, "District": "Malappuram", "Education": "ITI electrical" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.06892444, 11.13705049, 0.0 ], [ 76.05746924, 11.06723381, 0.0 ], [ 76.02474364, 11.00432659, 0.0 ], [ 75.97395877, 10.95447981, 0.0 ], [ 75.91008428, 10.92256553, 0.0 ], [ 75.83936261, 10.91170265, 0.0 ], [ 75.76870175, 10.92295343, 0.0 ], [ 75.70500447, 10.95521985, 0.0 ], [ 75.65449784, 11.00534993, 0.0 ], [ 75.62212674, 11.06844388, 0.0 ], [ 75.61106956, 11.13833106, 0.0 ], [ 75.62242361, 11.20817189, 0.0 ], [ 75.65509203, 11.27112671, 0.0 ], [ 75.70588555, 11.32102634, 0.0 ], [ 75.76983121, 11.35297854, 0.0 ], [ 75.84065938, 11.36384992, 0.0 ], [ 75.91142141, 11.35257498, 0.0 ], [ 75.97517586, 11.32026096, 0.0 ], [ 76.02567384, 11.27007804, 0.0 ], [ 76.05797377, 11.20694617, 0.0 ], [ 76.06892444, 11.13705049, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "qBi3XlieH8khIazP", "properties": { "Age": 18, "Lat": 11.07409, "City": "Manjeri", "Long": 76.101348, "Name": "Rishad A P", "Place": "Irumbuzhi", "color": "FF7600", "Number": 3, "District": "Malappuram", "Education": "Plus Two" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.33019885, 11.07316858, 0.0 ], [ 76.3186869, 11.00336772, 0.0 ], [ 76.28591733, 10.94049336, 0.0 ], [ 76.23510519, 10.89069311, 0.0 ], [ 76.17122243, 10.85883451, 0.0 ], [ 76.10051206, 10.84803127, 0.0 ], [ 76.02988092, 10.85934016, 0.0 ], [ 75.96622909, 10.89165782, 0.0 ], [ 75.91577956, 10.9418274, 0.0 ], [ 75.88347199, 11.00494522, 0.0 ], [ 75.87247881, 11.07483804, 0.0 ], [ 75.8838911, 11.14466539, 0.0 ], [ 75.91660607, 11.20758857, 0.0 ], [ 75.96742954, 11.25744134, 0.0 ], [ 76.03138522, 11.28933608, 0.0 ], [ 76.10220227, 11.30014529, 0.0 ], [ 76.17293309, 11.28880991, 0.0 ], [ 76.23663951, 11.25644343, 0.0 ], [ 76.28707771, 11.20622133, 0.0 ], [ 76.31931235, 11.14306737, 0.0 ], [ 76.33019885, 11.07316858, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "9kOcsg6Avgywmu4n", "properties": { "Age": 24, "Lat": 10.264204, "City": "Puthenchira", "Long": 76.25646, "Name": "Muhammad Faris", "Place": "Puthenchira", "color": "FF00A9", "Number": 4, "District": "Thrissur", "Education": "Btech(supply)" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.48469216, 10.26324035, 0.0 ], [ 76.47320015, 10.19344228, 0.0 ], [ 76.44050826, 10.13057396, 0.0 ], [ 76.38982308, 10.08078274, 0.0 ], [ 76.32610393, 10.04893583, 0.0 ], [ 76.25557832, 10.03814638, 0.0 ], [ 76.18513609, 10.04947018, 0.0 ], [ 76.12166001, 10.08180243, 0.0 ], [ 76.07135674, 10.13198455, 0.0 ], [ 76.03915183, 10.19511104, 0.0 ], [ 76.02820714, 10.26500726, 0.0 ], [ 76.03960792, 10.33483202, 0.0 ], [ 76.07225133, 10.39774684, 0.0 ], [ 76.1229493, 10.44758663, 0.0 ], [ 76.18673763, 10.47946562, 0.0 ], [ 76.25736238, 10.4902584, 0.0 ], [ 76.32789584, 10.47890792, 0.0 ], [ 76.3914204, 10.44652916, 0.0 ], [ 76.44171087, 10.39629847, 0.0 ], [ 76.47384661, 10.3331399, 0.0 ], [ 76.48469216, 10.26324035, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "krM7En1CDBVJxvIy", "properties": { "Age": 33, "Lat": 9.058065, "City": "Karunagappally", "Long": 76.535629, "Name": "Ansar Hamsa", "Place": "Karunagappally", "color": "1458C1", "Number": 5, "District": "Kollam", "Education": "ITI Electronics Mechanic\/\nDiploma in Instrumentation" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.76302066, 9.0570404, 0.0 ], [ 76.751555, 8.98724961, 0.0 ], [ 76.71896799, 8.92439286, 0.0 ], [ 76.6684546, 8.87461681, 0.0 ], [ 76.60495698, 8.84278802, 0.0 ], [ 76.53468168, 8.83201875, 0.0 ], [ 76.46449558, 8.84336344, 0.0 ], [ 76.40125816, 8.87571535, 0.0 ], [ 76.35115404, 8.92591352, 0.0 ], [ 76.31908966, 8.98905006, 0.0 ], [ 76.30821239, 9.05894845, 0.0 ], [ 76.31959935, 9.12876666, 0.0 ], [ 76.35214726, 9.19166677, 0.0 ], [ 76.40267607, 9.24148554, 0.0 ], [ 76.46623774, 9.27334011, 0.0 ], [ 76.53660127, 9.28410836, 0.0 ], [ 76.60686606, 9.27273625, 0.0 ], [ 76.67014259, 9.24034099, 0.0 ], [ 76.72023129, 9.19010009, 0.0 ], [ 76.75223162, 9.12693777, 0.0 ], [ 76.76302066, 9.0570404, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "BdhxbJhdZoaP5D2H", "properties": { "Age": 46, "Lat": 10.712031, "City": "Thrissur", "Long": 76.331566, "Name": "Sivadas. K S", "Place": "Kilimangalam", "color": "F4290C", "Number": 1, "District": "Thrissur", "Education": "Bsc physics " }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.56011902, 10.71097063, 0.0 ], [ 76.5485797, 10.64118185, 0.0 ], [ 76.51581451, 10.57833151, 0.0 ], [ 76.46503749, 10.52856487, 0.0 ], [ 76.40121683, 10.49674644, 0.0 ], [ 76.3305895, 10.48598639, 0.0 ], [ 76.26005463, 10.49733765, 0.0 ], [ 76.19650349, 10.52969292, 0.0 ], [ 76.1461498, 10.57989167, 0.0 ], [ 76.11392415, 10.64302709, 0.0 ], [ 76.10299092, 10.71292385, 0.0 ], [ 76.11443489, 10.78274069, 0.0 ], [ 76.14714958, 10.84563973, 0.0 ], [ 76.19794023, 10.8954571, 0.0 ], [ 76.26183345, 10.92730891, 0.0 ], [ 76.33256456, 10.93807225, 0.0 ], [ 76.40319478, 10.92669292, 0.0 ], [ 76.46679642, 10.89428896, 0.0 ], [ 76.51713648, 10.84403948, 0.0 ], [ 76.54928956, 10.78087067, 0.0 ], [ 76.56011902, 10.71097063, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "aNYe1N7XDVBwwyUN", "properties": { "Age": 32, "Lat": 9.386042, "City": "Thiruvalla", "Long": 76.547503, "Name": "Sankaran Namboothri ", "Place": "Thiruvalla", "color": "FF605C", "Number": 7, "District": "Pathanamthitta", "Education": "Btech (Electrical&Electronics)  Mtech(Power elctronics&drives)" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.7751033, 9.38497294, 0.0 ], [ 76.76361258, 9.31518617, 0.0 ], [ 76.730983, 9.25233754, 0.0 ], [ 76.68041399, 9.20257273, 0.0 ], [ 76.61685309, 9.17075697, 0.0 ], [ 76.54651277, 9.16000108, 0.0 ], [ 76.4762658, 9.17135814, 0.0 ], [ 76.4129772, 9.20372028, 0.0 ], [ 76.36283632, 9.25392573, 0.0 ], [ 76.33075324, 9.31706612, 0.0 ], [ 76.31987746, 9.38696472, 0.0 ], [ 76.33128639, 9.45677952, 0.0 ], [ 76.36387506, 9.51967285, 0.0 ], [ 76.41445967, 9.56948197, 0.0 ], [ 76.47808671, 9.6013247, 0.0 ], [ 76.54851847, 9.61207993, 0.0 ], [ 76.61884723, 9.60069484, 0.0 ], [ 76.68217675, 9.568288, 0.0 ], [ 76.73230202, 9.51803825, 0.0 ], [ 76.76431896, 9.45487088, 0.0 ], [ 76.7751033, 9.38497294, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "geHHg0gOorXfbvfa", "properties": { "Lat": 10.632102, "City": "Thalakkottukara ", "Long": 76.139534, "Name": "Rins. K", "Place": "Thalakkottukara ", "color": "D184EF", "Number": 8, "District": "Thrissur" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.36804555, 10.63118923, 0.0 ], [ 76.35655441, 10.56138687, 0.0 ], [ 76.32383626, 10.49851005, 0.0 ], [ 76.27310071, 10.44870681, 0.0 ], [ 76.20931217, 10.41684532, 0.0 ], [ 76.13870475, 10.40603982, 0.0 ], [ 76.06817583, 10.41734747, 0.0 ], [ 76.00461612, 10.44966496, 0.0 ], [ 75.95424001, 10.49983527, 0.0 ], [ 75.92198002, 10.56295432, 0.0 ], [ 75.91100359, 10.63284848, 0.0 ], [ 75.92239953, 10.702677, 0.0 ], [ 75.95506604, 10.76560112, 0.0 ], [ 76.00581324, 10.81545472, 0.0 ], [ 76.06967229, 10.84735041, 0.0 ], [ 76.14038211, 10.85816086, 0.0 ], [ 76.21100623, 10.84682705, 0.0 ], [ 76.27461758, 10.81446226, 0.0 ], [ 76.32498203, 10.76424159, 0.0 ], [ 76.35717152, 10.70108835, 0.0 ], [ 76.36804555, 10.63118923, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "g13EARk8IIO36qBV", "properties": { "Age": 35, "Lat": 10.313294, "City": "Irinjalakkuda", "Long": 76.244649, "Name": "Prince George", "Place": "Irinjalakkuda", "color": "FFAC00", "Number": 9, "District": "Thrissur" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.47291755, 10.31233412, 0.0 ], [ 76.46142476, 10.24253573, 0.0 ], [ 76.42872866, 10.17966679, 0.0 ], [ 76.3780363, 10.12987469, 0.0 ], [ 76.3143077, 10.0980267, 0.0 ], [ 76.2437713, 10.08723603, 0.0 ], [ 76.1733179, 10.09855858, 0.0 ], [ 76.10983132, 10.13088966, 0.0 ], [ 76.05951917, 10.18107081, 0.0 ], [ 76.02730787, 10.24419667, 0.0 ], [ 76.01635993, 10.3140927, 0.0 ], [ 76.02776097, 10.38391775, 0.0 ], [ 76.06040821, 10.44683332, 0.0 ], [ 76.11111325, 10.49667423, 0.0 ], [ 76.17491123, 10.52855455, 0.0 ], [ 76.24554722, 10.53934874, 0.0 ], [ 76.31609236, 10.52799954, 0.0 ], [ 76.37962781, 10.49562183, 0.0 ], [ 76.42992727, 10.44539187, 0.0 ], [ 76.46206919, 10.38223367, 0.0 ], [ 76.47291755, 10.31233412, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "ZEi0hFF8405WFdez", "properties": { "Lat": 10.064895, "City": "Nayarambalam", "Long": 76.212934, "Name": "Jyothish", "Place": "Nayarambalam", "color": "8058D0", "Number": 10, "District": "Ernakulam" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.44102891, 10.06397991, 0.0 ], [ 76.42955936, 9.99417719, 0.0 ], [ 76.3969008, 9.93129988, 0.0 ], [ 76.34625644, 9.88149636, 0.0 ], [ 76.28258168, 9.84963518, 0.0 ], [ 76.21209991, 9.83883094, 0.0 ], [ 76.14169696, 9.8501409, 0.0 ], [ 76.07825202, 9.88246149, 0.0 ], [ 76.02796882, 9.93263512, 0.0 ], [ 75.99577088, 9.99575701, 0.0 ], [ 75.98481915, 10.06565287, 0.0 ], [ 75.99619927, 10.13548157, 0.0 ], [ 76.02881017, 10.19840435, 0.0 ], [ 76.07946684, 10.24825549, 0.0 ], [ 76.1432092, 10.28014822, 0.0 ], [ 76.21378803, 10.2909559, 0.0 ], [ 76.28428041, 10.27961997, 0.0 ], [ 76.34777301, 10.24725391, 0.0 ], [ 76.39804389, 10.19703266, 0.0 ], [ 76.43017424, 10.13387922, 0.0 ], [ 76.44102891, 10.06397991, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "VLqe6PWuTIUoMjCo", "properties": { "Lat": 11.494457, "City": "Thikkodi", "Long": 75.63401, "Name": "Abhirami", "Place": "Thikkodi", "color": "799816", "Number": 11, "District": "Kozhikode" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 75.86322632, 11.49386836, 0.0 ], [ 75.85179877, 11.42404249, 0.0 ], [ 75.81906928, 11.36111383, 0.0 ], [ 75.7682499, 11.31123544, 0.0 ], [ 75.70431395, 11.27928223, 0.0 ], [ 75.63350983, 11.26837652, 0.0 ], [ 75.56275316, 11.27958443, 0.0 ], [ 75.49895552, 11.31181195, 0.0 ], [ 75.44835324, 11.36191091, 0.0 ], [ 75.41590025, 11.42498485, 0.0 ], [ 75.40478306, 11.49486543, 0.0 ], [ 75.41610524, 11.56471408, 0.0 ], [ 75.44877366, 11.62769057, 0.0 ], [ 75.49959961, 11.67762356, 0.0 ], [ 75.56360723, 11.70961729, 0.0 ], [ 75.63452079, 11.72053396, 0.0 ], [ 75.70538283, 11.70930326, 0.0 ], [ 75.76924154, 11.67702792, 0.0 ], [ 75.81983726, 11.62687435, 0.0 ], [ 75.85221856, 11.5637599, 0.0 ], [ 75.86322632, 11.49386836, 0.0 ] ] ] ] } },
  { "type": "Feature", "id": "4ytNnnL5bSjpo3ay", "properties": { "Lat": 10.48219, "City": "Vadanappally", "Long": 76.06797, "Name": "Sangeetha", "Place": "Vadanappally", "color": "8058DF", "Number": 12, "District": "Thrissur" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 76.296377, 10.48134135, 0.0 ], [ 76.2849114, 10.41153311, 0.0 ], [ 76.25222618, 10.34864473, 0.0 ], [ 76.20152767, 10.29882553, 0.0 ], [ 76.13777677, 10.26694532, 0.0 ], [ 76.06720414, 10.25612023, 0.0 ], [ 75.99670397, 10.26740925, 0.0 ], [ 75.93316434, 10.29971078, 0.0 ], [ 75.88279771, 10.34986922, 0.0 ], [ 75.85053557, 10.41298153, 0.0 ], [ 75.83954535, 10.48287475, 0.0 ], [ 75.85091698, 10.55270825, 0.0 ], [ 75.88355087, 10.61564294, 0.0 ], [ 75.93426027, 10.66551178, 0.0 ], [ 75.99808016, 10.697426, 0.0 ], [ 76.06875351, 10.7082565, 0.0 ], [ 76.13934765, 10.69694221, 0.0 ], [ 76.20293862, 10.66459438, 0.0 ], [ 76.25329435, 10.61438631, 0.0 ], [ 76.2854875, 10.55123997, 0.0 ], [ 76.296377, 10.48134135, 0.0 ] ] ] ] } }
  ]
  }
  ;
  
  
  L.geoJSON(geojsonFeature).addTo(map);
  var myLayer = L.geoJSON().addTo(map);
  myLayer.addData(geojsonFeature);
  
  
  L.geoJSON(someFeatures, {
      filter: function(feature,layer) {
          return feature.properties.show_on_map;
      }
  }).addTo(map);


  var pointLayer = L.geoJSON(null, {
    pointToLayer: function(feature,latlng){
      label = String(feature.properties.name) // must be string, can't use straight 'feature.properties.attribute'
      console.log("Label is: " + label);
      var myIcon = L.divIcon({className: 'my-div-icon'});    
      return new L.marker(latlng, 
          {icon: myIcon, 
          html: label,
          });
      }
    });
  pointLayer.addData(data_points);
  map.addLayer(pointLayer);
  